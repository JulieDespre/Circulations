<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Info Circulations... </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="src/sass/css/style.css">

    <link rel="icon" href="zombie2.ico" type="image/x-icon">
    <link rel="shortcut icon" href="zombie2.ico" type="image/x-icon">


    <!-- bibliothèque pour la géolocalisation -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="SHA256-P4NXAOJBHIIN+HMNHRZRCF9TD/MIZYOHS5OBTRR9BMY="
          crossorigin="">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="SHA256-20NQCCHB9CO0QIJJZRGUK2/Z9VM+KNIYXNV1LVTLZBO="
            crossorigin="">
    </script>
    <!-- bibliothèque pour les graphiques -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <!-- bibliothèque pour parser le CSV -->
    <script src="https://unpkg.com/papaparse@5.3.0/papaparse.min.js"></script>


</head>
<body>

<h1>   Info circulations... </h1>
<h2> Votre géolocalisation :</h2>
<div id="divTraffic">
    <div id="divGoeloc"></div>
    <h3> Affichage de l'état du traffic autour de vous :</h3>
    <div id="trafficMap" style="height: 400px; width: 75%"></div>
</div>

<h2>Votre Région :</h2>

<div id="srasMapRegion">
    <h2> Affichage de la prévalence des cas de SARS-CoV-2 :</h2>
    <canvas id="srasCasReg" width="50%" height="50%"></canvas>
    <h2> Affichage de la circulation des variants de SARS-CoV-2 :</h2>
    <label>
        Sélectionnez une région :
        <select id="regionSelector"></select>
    </label>
    <canvas id="srasVariantReg" width="50%" height="50%"></canvas>
</div>

<h2> En France :</h2>
<div id="srasMapFrance">
    <div id="srasCasDiv">
    <h2> Affichage de la prévalence des cas de SARS-CoV-2 :</h2>
    <canvas id="srasCas"></canvas>
    </div>
    <div id="srasVarDiv">
    <h2> Affichage de la circulation des variants de SARS-CoV-2 :</h2>
    <label for="dateSelector">Sélectionnez une date :</label>
    <select id="dateSelector"></select>
    <canvas id="srasVariant"></canvas>
    </div>
</div>

<h2> Affichage de la qualité de l'air :</h2>
<img id="airqualityicon" src=""/>

<div id="Données sur les APIs">
    <h2> Liens vers les APis utilisées :</h2>
    <ul>
        <li><b>Localisation de l'utilisateur :</b> http://ip-api.com/json/{clientIP}</li>
        <li><b>Localisation de l'IUT Charlemagne :</b> https://api-adresse.data.gouv
            .fr/search/?q=iut+nancy+charlemagne&postcode=54000</li>
        <li><b>Problème de traffique dans le Grand EST :</b> https://www.infoclimat.fr/public-api/gfs/xml?_ll={lat},{lon}&_auth=CRNSRVYoXX8DLlBnUiQDKlU9BDFZLwYhVioHZFg9BXhROlEwVTVRN1E%2FB3oBLldhUH0ObQkyBjYFbgpyDH4FZAljUj5WPV06A2xQNVJ9AyhVewRlWXkGIVY9B2BYKwVkUTNRMVUoUTpROQd7ATBXYlB8DnEJNwY5BWYKaQxpBWUJa1I0VjFdPgNzUC1SZAMyVW8EMFk3BjdWNQdpWGcFYFE3UTFVP1EwUSAHYgE1V2BQYQ5qCTMGPgVuCnIMfgUfCRlSK1Z1XX0DOVB0Un8DYlU4BDA%3D&_c=5ea637d270ebe742e04c810db115e5e5</li>
        <li><b>Données pour le SARS-COV-2: </b>
            <ul>
                <li><b>Données pour la France :</b>https://static.data.gouv.fr/resources/variants-circulants-indicateurs-issus-du-sequencage-emergen/20240110-170034/flash-fra-2024-01-10-18h00.csv</li>
                <li><b>Données pour les régions :</b>https://www.data.gouv.fr/fr/datasets/r/c68e73c2-5045-4ee2-ac50-bd1c39ff3175</li>
            </ul></li>
        <li><b>Qualité de l'air : </b>https://services3.arcgis
            .com/Is0UwT37raQYl9Jj/ArcGIS/rest/services/ind_grandest/FeatureServer/0/ (url raccourcie)</li>
    </ul>
</div>

<!-- appel aux scripts personnalisés -->
<script type="module" src="src/javascript/geolocalisation.js"></script>
<script type="module" src="src/javascript/traffic.js"></script>
<!--<script type="module" src="src/javascript/srasRegion.js"></script> -->
<script type="module" src="src/javascript/sras.js"></script>
<script type="module" src="src/javascript/qualiteAir.js"></script>

</body>
</html>